let fs=require(fs);export class todo{constructor(t,a,s="json",o=`TODO/todo_${t}.json`,e=Date.now(),i=!1){this.name=t,this.author=a,this.startdate=e,this.type=json,this.path=`TODO/todo_${t}.${s}`,i?fs.readFile("users.json",function(t,a){if(t)throw t;a=JSON.parse(a),this.fileData=a}):this.fileData={Todos:[],author:this.author,name:this.name,startdate:this.startdate}}startUp(){fs.open(this.path,"r+",function(t,a){if(t)throw t;console.log("a new TODO file has been created")}),fs.writeFile(this.path,{Todos:[],author:this.author,name:this.name,startdate:this.startdate}),this.fileData={Todos:[],author:this.author,name:this.name,startdate:this.startdate}}addItem(t,a,s="",o="",e="",i="low"){this.fileData.Todos.push({data:t,id:a,name:s,startdate:o,duedate:e,priority:i})}deleteItem(t){var a=this.fileData.Todos.find(a=>a.id===t);void 0===a&&console.log(`No TODOs with the id ${t} found`),this.fileData.Todos=this.fileData.Todos.splice(this.fileData.Todos.indexOf(a),1)}flush(){fs.writeFile(this.path,this.fileData,function(t){if(t)return console.error(t)})}getFullTodos(){console.log(this.fileData.Todos)}getInfo(){console.log(this.name),console.log(this.author),console.log(this.startdate),console.log(this.path)}getOverdueTodos(){this.fileData.Todos.forEach(t=>{""!==t.duedate&&t.duedate<Date.now()&&console.log(`${t} , is ${(Date.now()-t.duedate)/6e3} minutes late`)})}sortByPriority(t){this.fileData.Todos.forEach(a=>{""!==a.priority&&a.priority===t&&console.log(`${a}`)})}sortByDate(t,a){let s=t.split("/");var o=new Date(s[2],s[1]-1,s[0]);let s=a.split("/");var e=new Date(myDate2[2],myDate2[1]-1,myDate2[0]);this.fileData.Todos.forEach(t=>{o<t.startdate&&t.startdate<e&&console.log(`${t}`)})}}
